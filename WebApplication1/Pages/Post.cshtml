@page
@model WebApplication1.Pages.PostModel
@{
}

<h1>@Model.title</h1>

<p>
    @Model.content
</p>

<hr />

<form class="form-floating" method="post" asp-page-handler="Comment">
    <input asp-for="post_id" hidden>
    <textarea asp-for="comment" id="comment" class="form-control" placeholder="Leave a comment here" id="floatingTextarea2" style="height: 100px"></textarea>
    <label for="floatingTextarea2">Comments</label>
</form>

@if (Model.dataTable != null)
{
    for (int i = 0; i < Model.dataTable.Rows.Count; i++)
    {
        <div class="border mt-4 card shadow-sm">
            <div class="p-3 card-body">
                @Model.dataTable.Rows[i][2].ToString()

                <div class="float-end">
                    From @Model.dataTable.Rows[i][3].ToString()
                </div>
            </div>
        </div>
    }
}

<div style="margin-bottom: 64px;"></div>

<script>
    document.getElementById("comment").addEventListener("keypress", e => {
        if (e.key === "Enter" && !e.shiftKey) {
            e.preventDefault();

            e.currentTarget.closest("form").submit();
        }
    });
</script>
